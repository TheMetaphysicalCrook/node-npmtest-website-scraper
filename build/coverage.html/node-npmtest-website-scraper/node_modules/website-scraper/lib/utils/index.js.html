<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-website-scraper/node_modules/website-scraper/lib/utils/index.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-website-scraper">npmtest-website-scraper (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-website-scraper/node_modules/website-scraper/lib/utils/index.js</span></h1>
    <h2>
        
        Statements: <span class="metric">47.62% <small>(30 / 63)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 15)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">5.26% <small>(1 / 19)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">47.62% <small>(30 / 63)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-website-scraper/node_modules/website-scraper/lib/utils/</a> &#187; index.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150</td><td class="line-coverage"><span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">var url = require('url');
var path = require('path');
var Promise = require('bluebird');
var normalizeUrl = require('normalize-url');
var htmlEntities = require('he');
var typeByMime = require('../config/resource-type-by-mime');
var typeByExt = require('../config/resource-type-by-ext');
&nbsp;
var logger = require('../logger');
&nbsp;
var MAX_FILENAME_LENGTH = 255;
var IS_URL = /^((http[s]?:)?\/\/)/;
&nbsp;
<span class="fstat-no" title="function not covered" >function isUrl (path) {</span>
<span class="cstat-no" title="statement not covered" >	return IS_URL.test(path);</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function getUrl (currentUrl, path) {</span>
<span class="cstat-no" title="statement not covered" >	var pathObject = url.parse(path);</span>
<span class="cstat-no" title="statement not covered" >	if (isUrl(path) &amp;&amp; !pathObject.protocol) {</span>
<span class="cstat-no" title="statement not covered" >		var urlObject = url.parse(currentUrl);</span>
<span class="cstat-no" title="statement not covered" >		pathObject.protocol = urlObject.protocol;</span>
<span class="cstat-no" title="statement not covered" >		path = url.format(pathObject);</span>
	}
<span class="cstat-no" title="statement not covered" >	return url.resolve(currentUrl, path);</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function getUnixPath (filepath) {</span>
<span class="cstat-no" title="statement not covered" >	return filepath.replace(/\\/g, '/');</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function getRelativePath (path1, path2) {</span>
<span class="cstat-no" title="statement not covered" >	var dirname = path.dirname(path1);</span>
<span class="cstat-no" title="statement not covered" >	var relativePath = path.relative(dirname, path2);</span>
<span class="cstat-no" title="statement not covered" >	return getUnixPath(relativePath);</span>
}
&nbsp;
/**
 * Returns decoded pathname from url
 * Example: https://example.co/path/logo%20(1).svg =&gt; /path/logo (1).svg
 * @param u - url
 * @returns {string} decoded pathname
 */
<span class="fstat-no" title="function not covered" >function getPathnameFromUrl (u) {</span>
<span class="cstat-no" title="statement not covered" >	var pathname = url.parse(u).pathname;</span>
<span class="cstat-no" title="statement not covered" >	return decodeURI(pathname);</span>
}
&nbsp;
/**
 * Returns filename from given url
 * Example: http://example.com/some/path/file.js =&gt; file.js
 * @param {string} u - url
 * @returns {string} filename
 */
<span class="fstat-no" title="function not covered" >function getFilenameFromUrl (u) {</span>
<span class="cstat-no" title="statement not covered" >	return path.basename(getPathnameFromUrl(u));</span>
}
&nbsp;
/**
 * Returns relative path from given url
 * Example: http://example.com/some/path/file.js =&gt; some/path/file.js
 * @param {string} u - url
 * @returns {string} path
 */
<span class="fstat-no" title="function not covered" >function getFilepathFromUrl (u) {</span>
<span class="cstat-no" title="statement not covered" >	var nu = normalizeUrl(u);</span>
<span class="cstat-no" title="statement not covered" >	return getPathnameFromUrl(nu).substring(1);</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function getHashFromUrl (u) {</span>
<span class="cstat-no" title="statement not covered" >	return url.parse(u).hash || '';</span>
}
&nbsp;
/**
 * Returns extension for given filepath
 * Example: some/path/file.js =&gt; .js
 * @param {string} filepath
 * @returns {string|null} - extension
 */
<span class="fstat-no" title="function not covered" >function getFilenameExtension (filepath) {</span>
<span class="cstat-no" title="statement not covered" >	return (typeof filepath === 'string') ? path.extname(filepath).toLowerCase() : null;</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function shortenFilename (filename) {</span>
<span class="cstat-no" title="statement not covered" >	if (filename.length &gt;= MAX_FILENAME_LENGTH) {</span>
<span class="cstat-no" title="statement not covered" >		var shortFilename = filename.substring(0, 20) + getFilenameExtension(filename);</span>
<span class="cstat-no" title="statement not covered" >		logger.debug('shorten filename: ' + filename + ' -&gt; ' + shortFilename);</span>
<span class="cstat-no" title="statement not covered" >		return shortFilename;</span>
	}
<span class="cstat-no" title="statement not covered" >	return filename;</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function waitAllFulfilled (promises) {</span>
<span class="cstat-no" title="statement not covered" >	return Promise.all(promises.map(<span class="fstat-no" title="function not covered" >function returnWhenFulfilled (promise) {</span></span>
<span class="cstat-no" title="statement not covered" >		return promise.reflect();</span>
	}));
}
&nbsp;
<span class="fstat-no" title="function not covered" >function urlsEqual (url1, url2) {</span>
<span class="cstat-no" title="statement not covered" >	return normalizeUrl(url1) === normalizeUrl(url2);</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function isUriSchemaSupported (path) {</span>
<span class="cstat-no" title="statement not covered" >	var protocol = url.parse(path).protocol;</span>
<span class="cstat-no" title="statement not covered" >	return !protocol || protocol &amp;&amp; isUrl(path);</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function getTypeByMime (mimeType) {</span>
<span class="cstat-no" title="statement not covered" >	return typeByMime[mimeType];</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function getTypeByFilename (filename) {</span>
<span class="cstat-no" title="statement not covered" >	var ext = getFilenameExtension(filename);</span>
<span class="cstat-no" title="statement not covered" >	return typeByExt[ext];</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function decodeHtmlEntities (text) {</span>
<span class="cstat-no" title="statement not covered" >	return typeof text === 'string' ? htmlEntities.decode(text) : '';</span>
}
&nbsp;
function clone (obj) {
	return Object.assign({}, obj);
}
&nbsp;
<span class="fstat-no" title="function not covered" >function extend (first, second) {</span>
<span class="cstat-no" title="statement not covered" >	return Object.assign({}, first, second);</span>
}
&nbsp;
module.exports = {
	isUrl,
	getUrl,
	getUnixPath,
	getRelativePath,
	getFilenameFromUrl,
	getFilepathFromUrl,
	getFilenameExtension,
	getHashFromUrl,
	shortenFilename,
	waitAllFulfilled,
	normalizeUrl,
	urlsEqual,
	isUriSchemaSupported,
	getTypeByMime,
	getTypeByFilename,
	decodeHtmlEntities,
	clone,
	extend
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Fri Apr 21 2017 11:53:40 GMT+0000 (UTC)</div>
</div>
</body>
</html>
